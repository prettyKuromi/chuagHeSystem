import{r as c,z as M,I as y,H as r,o as u,Y as F,C as a,O as H,n as h,aq as x,F as C,v as k}from"./index-DvKwO_fi.js";import{v as N}from"./el-loading-CC-sKQoZ.js";import{_ as T,E as $,a as q,b as O,c as Y}from"./el-table-column-CYWBksln.js";import{j as G,H as J,I as K}from"./_plugin-vue_export-helper-BGr0VRV8.js";import"./el-tooltip-Cu_KW4QD.js";import{i as E}from"./request-uD3OaQhw.js";import{E as Q}from"./el-message-CryOUJmZ.js";const R=function(i){return E.get("/innovation-core/manage/review",{params:i})},S=function(i){return E.post("/innovation-core/manage/review",i)},U={m:"4"},ne={__name:"auditingPage",setup(i){const d=c([]),p=c(!1),_=function(t,l){S({pid:t.detail[0].id,status:l}).then(e=>{console.log(e),Q({message:"审核成功",type:"success"})}).finally(()=>{w()})},w=()=>{o.value.page_num=1,o.value.page_size=10,d.value=[],p.value=!1,g()},o=c({page_num:1,page_size:10}),m=c(0),P=function(t){console.log("页面变化"+t)},g=function(){p.value=!0,R(o.value).then(t=>{const l=t.projects.map(e=>({...e,detail:[e.detail]}));d.value=l,m.value=t.total}).finally(()=>{p.value=!1})},j=[{label:"标题",prop:"title"},{label:"简介",prop:"introduction"},{label:"截止日期",prop:"deadline"},{label:"研究方向",prop:"contestDirections"}],z=[{label:"项目id",prop:"id"},{label:"赛事级别",prop:"level"},{label:"学校",prop:"school"},{label:"校区",prop:"school_region"},{label:"项目状态",prop:"status"},{label:"所属分区",prop:"section"},{label:"所属用户id",prop:"uid"}];M(()=>{g()});const A=function(t){return(o.value.page_num-1)*o.value.page_size+t+1},f=(t,l,e)=>e==""&&e!=0?"---":l.property=="status"?e==0?"普通":e=="1"?"急招":e=="2"?"完结":"":e;return(t,l)=>{const e=$,v=q,b=G,B=O,L=Y,D=T,I=N;return u(),y(D,{title:"项目审核"},{default:r(()=>[F((u(),y(v,{data:d.value,style:{width:"100%"},border:!0,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},{empty:r(()=>[a(B,{description:"没有数据~"})]),default:r(()=>[a(e,{type:"expand"},{default:r(n=>[H("div",U,[a(v,{data:n.row.detail,border:!0,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},{default:r(()=>[(u(),h(C,null,x(z,s=>a(e,{key:s.prop,label:s.label,prop:s.prop,formatter:f},null,8,["label","prop"])),64))]),_:2},1032,["data"])])]),_:1}),a(e,{type:"index",index:A,label:"序号",width:"60"}),(u(),h(C,null,x(j,n=>a(e,{key:n.prop,label:n.label,prop:n.prop,formatter:f},null,8,["label","prop"])),64)),a(e,{label:"操作",width:"120"},{default:r(({row:n})=>[a(b,{icon:k(J),circle:"",plain:"",type:"primary",onClick:s=>_(n,1)},null,8,["icon","onClick"]),a(b,{icon:k(K),circle:"",plain:"",type:"danger",onClick:s=>_(n,0)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[I,p.value]]),a(L,{background:!0,layout:"jumper,total, prev, pager, next",style:{"margin-top":"20px","justify-content":"flex-end"},onCurrentChange:P,total:m.value,"page-size":o.value.page_size,"current-page":o.value.page_num},null,8,["total","page-size","current-page"])]),_:1})}}};export{ne as default};
